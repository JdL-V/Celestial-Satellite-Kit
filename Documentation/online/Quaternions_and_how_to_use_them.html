<!DOCTYPE html>
<!-- saved from url=(0072)https://danceswithcode.net/engineeringnotes/quaternions/quaternions.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		
		<link rel="stylesheet" href="./Quaternions_and_how_to_use_them_files/main_stylesheet.css">
		<title>Quaternions</title>
    </head>

    <body>
		
		<div class="page">
		
			<!-- ============================= -->
			<!-- START OF MENU AT TOP OF PAGE  -->
			<!-- ============================= -->
			<div class="centered">
				<nav class="menu">
					<ul>
						<li><a href="https://danceswithcode.net/engineeringnotes/index.html">Home </a></li>
						<li><a class="currentPage" href="https://danceswithcode.net/engineeringnotes/quaternions/quaternions.html">Main Paper</a></li>
						<li><a href="https://danceswithcode.net/engineeringnotes/quaternions/conversion_tool.html">Conversion Tool</a></li>
					</ul>
				</nav>
			</div>
			<!-- ============================= -->
			<!-- END OF MENU AT TOP OF PAGE    -->
			<!-- ============================= -->

			<div class="centered">
				<h1>Rotation Quaternions, and How to Use Them</h1>
			</div>
						
			<p class="centered"> D. Rose - May, 2015
			</p><hr>
			
			<!-- ====================================================== -->
			<h2 class="centered"> Abstract </h2>
			<!-- ====================================================== -->
			<p>This paper provides a basic introduction to the use of quaternions in 3D rotation applications.  We give a simple definition of quaternions, and show how to convert back and forth between quaternions, axis-angle representations, Euler angles, and rotation matrices.  We also show how to rotate objects forward and back using quaternions, and how to concatenate several rotation operations into a single quaternion. 
			</p><hr>
						
			<!-- ====================================================== -->
			<h2> Introduction </h2>
			<!-- ====================================================== -->
			<p>Strictly speaking, a quaternion is represented by four elements:
			
			</p><div class="tab_40"><b><i>q</i></b> = <i>q</i><sub>0</sub> + <i><b>i</b>q</i><sub>1</sub> + <i><b>j</b>q</i><sub>2</sub> + <i><b>k</b>q</i><sub>3</sub></div>
			<div class="equation_label"> (1) </div>
			
			<p>where <i>q</i><sub>0</sub>, <i>q</i><sub>1</sub>, <i>q</i><sub>2</sub> and <i>q</i><sub>3</sub> are real numbers, and <b><i>i</i></b>, <b><i>j</i></b> and <b><i>k</i></b> are mutually orthogonal imaginary unit vectors.  The <i>q</i><sub>0</sub> term is referred to as the "real" component, and the remaining three terms are the "imaginary" components.   In practice (and for the remainder of this paper), the imaginary notation is implied, and only the four coefficients are used to specify a quaternion, as in equation 2:
			
			</p><div class="tab_40"><b><i>q</i></b> = (<i>q</i><sub>0</sub>, <i>q</i><sub>1</sub>, <i>q</i><sub>2</sub>, <i>q</i><sub>3</sub>)</div>
			<div class="equation_label"> (2) </div>
			
			<p>Quaternions are a complicated subject.  However, in this paper we will restrict ourselves to a subset of quaternions called <b><i>rotation quaternions</i></b>.  Rotation quaternions are a mechanism for representing rotations in three dimensions, and can be used as an alternative to rotation matrices in 3D graphics and other applications.  Using them requires no understanding of complex numbers.
			
			</p><p>Rotation quaternions are closely related to the axis-angle representation of rotation.  We will therefore start with an explanation of the axis-angle representation, and then show how to convert to a quaternion.
			
			<!-- ====================================================== -->
			</p><h2> Axis-Angle Representation of 3D Rotations </h2>
			<!-- ====================================================== -->

			According to Euler's rotation theorem, any 3D rotation (or sequence of rotations) can be specified using two parameters: a unit vector that defines an axis of rotation; and an angle <i>θ</i> describing the magnitude of the rotation about that axis.  This is illustrated in Figure 1:
			
			<p><img style="margin:0px auto; display:block;" src="./Quaternions_and_how_to_use_them_files/axis-angle.png" alt="Axis-Angle illustration">
			</p><p class="centered"><b>			
				Figure 1:  Any 3D rotation can be specified by an axis of rotation and a rotation angle around that axis
			</b></p>

			<p>An axis-angle rotation can therefore be represented by four numbers as in equation 3:
			
			</p><div class="tab_40">(<i>θ, x̂, ŷ, ẑ</i>) </div>
			<div class="equation_label"> (3) </div>

			<p>where:
			</p><p></p><div class="tab_05">(<i>x̂, ŷ, ẑ</i>) is a unit vector that defines the axis of rotation</div>
			<p></p><div class="tab_05"><i>θ</i> is the amount of rotation around (<i>x̂, ŷ, ẑ</i>)</div>
			
			<!-- ====================================================== -->
			<h2> Convert Axis-Angle to Quaternion </h2>
			<!-- ====================================================== -->
			A <b><i>rotation quaternion</i></b> is similar to the axis-angle representation.  If we know the axis-angle components (θ, x̂, ŷ, ẑ), we can convert to a rotation quaternion q as follows:
			
			<p></p><div class="tab_30"><b><i>q</i></b> = (<i>q</i><sub>0</sub>, <i>q</i><sub>1</sub>, <i>q</i><sub>2</sub>, <i>q</i><sub>3</sub>) </div>
			<div class="equation_label"> (4a) </div>
			
			<p>where:
			
			</p><p></p><div class="tab_30">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-4b.png" alt="Equation">
			</div>
			<div class="equation_label">(4b) </div>
			
			<p></p><div class="tab_30">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-4c.png" alt="Equation">
			</div>
			<div class="equation_label">(4c) </div>
			
			<p></p><div class="tab_30">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-4d.png" alt="Equation">
			</div>
			<div class="equation_label">(4d) </div>
			
			<p></p><div class="tab_30">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-4e.png" alt="Equation">
			</div>
			<div class="equation_label">(4e) </div>
			
			<p>From these equations we can see that the real term of the quaternion (<i>q</i><sub>0</sub>) is completely determined by the rotation angle, and the remaining three imaginary terms (<i>q</i><sub>1</sub>, <i>q</i><sub>2</sub> and <i>q</i><sub>3</sub>) are just the three rotation axis vectors scaled by a common factor.  One consequence of this representation is that the magnitude of a rotation quaternion (that is, the sum of the squares of all four components) is always equal to one.			
			
			</p><p>Since the axis-angle and quaternion representations contain exactly the same information, it is reasonable to ask why we would bother with the less-intuitive quaternions at all?  The answer is that to do anything useful with an axis-angle quantity—such as rotate a set of points that make up some 3D object—we have to perform these trigonometric operations anyway.  Performing them ahead of time means that most quaternion operations can be accomplished using only multiplication/division and addition/subtraction, thus saving valuable computer cycles.
			
			<!-- ====================================================== -->
			</p><h2> Convert Quaternion to Axis-Angle </h2>
			<!-- ====================================================== -->
			Given the quaternion <b><i>q</i></b> = (<i>q</i><sub>0</sub>, <i>q</i><sub>1</sub>, <i>q</i><sub>2</sub>, <i>q</i><sub>3</sub>), we can convert back to an axis-angle representation as follows.  First, we extract the rotation angle from q<sub>0</sub>:
			
			<p></p><div class="tab_40"><i>θ</i> = 2cos<sup>-1</sup>(<i>q<sub>0</sub></i>)</div>
			<div class="equation_label">(5) </div>
			
			<p>If <i>θ</i> is not zero, we can then find the rotation axis unit vector as follows:
			
			</p><p></p><div class="tab_30">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-6.png" alt="Equation">
			</div>
			<div class="equation_label">(6) </div>
			
			<p>There is one special case in which equation (6) will fail.  A quaternion with the value <b><i>q</i></b> = (1,0,0,0) is known as the <b><i>identity quaternion</i></b>, and will produce no rotation.  In this case, equation (5) will produce a rotation angle (<i>θ</i>) of zero, which is what we expect.  However, since the axis of rotation is undefined when there is no rotation, equation (6) will generate a divide-by-zero error.  Any software implementation should therefore test whether <i>q</i><sub>0</sub> equals 1.0, and if it does should set <i>θ</i> = 0, and (<i>x̂, ŷ, ẑ</i>) = (1, 0, 0).  
			
			</p><p>It is worth noting that there are several ways to convert from a quaternion to axis-angle, so don't be too concerned if equations 5 and 6 don't match other sources.
			
			<!-- ====================================================== -->
			</p><h2> Convert Quaternion to Rotation Matrix </h2>
			<!-- ====================================================== -->
			Given the rotation quaternion <b><i>q</i></b> = (<i>q</i><sub>0</sub>, <i>q</i><sub>1</sub>, <i>q</i><sub>2</sub>, <i>q</i><sub>3</sub>), the corresponding rotation matrix is:
			
			<p></p><div class="tab_15">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-7a.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(7a) </div>
			
			<p>Or equivalently:
			
			</p><p></p><div class="tab_20">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-7b.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(7b) </div>
			
			<p>Both methods work for all valid unit rotation quaternions, including the identity quaternion.
			
			<!-- ====================================================== -->
			</p><h2> Convert Rotation Matrix to Quaternion </h2>
			<!-- ====================================================== -->
			
			Given the rotation matrix R:
			
			<p></p><div class="tab_35">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-8.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(8) </div>

			<p>We can find the equivalent quaternion using two steps.
			
			</p><p><b><i>Step 1:</i></b> Find the <u>magnitude</u> of each quaternion component.  This leaves the <u>sign</u> of each component undefined:
			
			</p><p></p><div class="tab_30">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-9a.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(9a) </div>

			<p></p><div class="tab_30">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-9b.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(9b) </div>

			<p></p><div class="tab_30">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-9c.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(9c) </div>

			<p></p><div class="tab_30">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-9d.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(9d) </div>

			<p><b><i>Step 2:</i></b> To resolve the signs, find the largest of <i>q</i><sub>0</sub>, <i>q</i><sub>1</sub>, <i>q</i><sub>2</sub>, <i>q</i><sub>3</sub> and assume its sign is positive.  Then compute the remaining components as shown in the table below.  Taking the largest magnitude avoids division by small numbers, which would reduce numerical accuracy.			
			
			</p><p></p><div class="centered">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/table1.png" alt="table1">
			</div>

			<p>The reason the sign is ambiguous is that any given rotation has two possible quaternion representations.  If one is known, the other can be found by taking the negative of all four terms.  This has the effect of reversing both the rotation angle and the axis of rotation.  So for all rotation quaternions, (<i>q</i><sub>0</sub>, <i>q</i><sub>1</sub>, <i>q</i><sub>2</sub>, <i>q</i><sub>3</sub>) and (−<i>q</i><sub>0</sub>, −<i>q</i><sub>1</sub>, −<i>q</i><sub>2</sub>, −<i>q</i><sub>3</sub>) produce identical rotations.  To convert from a rotation matrix to a quaternion, we must arbitrarily pick one of the two possible answers as described in steps 1 and 2.
			
			<!-- ====================================================== -->
			</p><h2> Convert Euler Angles to Quaternion </h2>
			<!-- ====================================================== -->

			Euler angles are a complicated subject, primarily because there are dozens of mutually exclusive ways to define them.  Different authors are likely to use different conventions, often without clearly stating the underlying assumptions, which makes it difficult to combine equations and code from more than one source.			
			
			<p>In this paper we will use the following definition of Euler angles.  
			
			</p><ul>
				<li>Tait-Bryan variant of Euler Angles
				</li><li>Yaw-pitch-roll rotation order, rotating around the z, y and x axes respectively
				</li><li>Intrinsic rotation (the axes move with each rotation)
				</li><li>Active (otherwise known as alibi) rotation (the point is rotated, not the coordinate system)
				</li><li>Right-handed coordinate system with right-handed rotations
			</li></ul>
			
			<p>This is a common convention, and most people find it the easiest to visualize.  For a more thorough discussion of Euler angles, see <a href="https://danceswithcode.net/engineeringnotes/rotations_in_3d/rotations_in_3d_part1.html">this paper</a>.
			
			</p><p>Given the above definition, we can convert from Euler angles to Quaternion as follows:
			
			</p><p></p><div class="tab_20">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-10a.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(10a) </div>
			
			<p></p><div class="tab_20">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-10b.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(10b) </div>
			
			<p></p><div class="tab_20">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-10c.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(10c) </div>
			
			<p></p><div class="tab_20">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-10d.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(10d) </div>
			
			<p>where:
			
			</p><p></p><div class="tab_05"><i>u</i> = roll angle</div>
			<br><div class="tab_05"><i>v</i> = pitch angle</div>
			<br><div class="tab_05"><i>w</i> = yaw angle</div>
			<br><div class="tab_05">c() = cosine function</div>
			<br><div class="tab_05">s() = sine function</div>

			<p>Equations 10a-d work for all values of Euler angle, including the condition of gimbal lock, where the pitch angle equals +90° or −90°.
			
			<!-- ====================================================== -->
			</p><h2> Convert Quaternion to Euler Angles </h2>
			<!-- ====================================================== -->
			Equations 11a through 11c show how to convert from quaternions to Euler angles:
			
			<p></p><div class="tab_05">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-11a.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(11a) </div>
			
			<p></p><div class="tab_05">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-11b.png" alt="Equation">
			</div>
			<div class="equation_label">(11b) </div>
			
			<p></p><div class="tab_05">
				<img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/eq-11c.png" alt="Equation">
			</div>
			<div class="equation_label"><br>(11c) </div>
			
			<!-- ====================================================== -->
			<h2> Gimbal Lock </h2>
			<!-- ====================================================== -->
			Equations 11a through 11c are the general solution for extracting Euler angles from a quaternion.  But in the special case where the pitch angle is +90° or −90°, the arguments for 11a and 11c will all be zero, for which the atan2() function is undefined.
			
			<p>This is the dreaded "gimbal lock."  It occurs because, at a pitch angle of +90° and −90°, the yaw and roll axes of rotation are aligned with each other in the world coordinate system, and therefore produce the same effect. This means there is no unique solution: any orientation can be described using an infinite number of yaw and roll angle combinations. 
			
			</p><p>To handle the gimbal lock condition, we must first use equation 11b to determine whether the pitch angle is +π/2 or −π/2 radians.  Then we set either roll or yaw to zero and solve for the other as follows:			
			
			</p><p></p><div class="centered"><img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/gimbal_lock.png" alt="table"></div>
			
			<p>Note that while Euler angles are susceptible to gimbal lock, quaternions and rotation matrices are not.
			
			<!-- ====================================================== -->
			</p><h2> Rotating a Point using Quaternions </h2>
			<!-- ====================================================== -->
			This section defines quaternion multiplication and inversion, and shows how they are used to perform a rotation.
			
			<!-- ====================================================== -->
			<h3> Quaternion Multiplication </h3>
			<!-- ====================================================== -->
			The <i><b>product</b></i> of two quaternions:
			
			<p></p><div class="centered"><b><i>t</i></b> = <b><i>rs</i></b></div>
			
			<p></p><div class="centered">(<i>t</i><sub>0</sub>, <i>t</i><sub>1</sub>, <i>t</i><sub>2</sub>, <i>t</i><sub>3</sub>) = (<i>r</i><sub>0</sub>, <i>r</i><sub>1</sub>, <i>r</i><sub>2</sub>, <i>r</i><sub>3</sub>) ✕ (<i>s</i><sub>0</sub>, <i>s</i><sub>1</sub>, <i>s</i><sub>2</sub>, <i>s</i><sub>3</sub>)</div>
			
			<p>Is defined as:
			
			</p><p></p><div class="tab_35"><i>t</i><sub>0</sub> = (<i>r</i><sub>0</sub><i>s</i><sub>0</sub> − <i>r</i><sub>1</sub><i>s</i><sub>1</sub> − <i>r</i><sub>2</sub><i>s</i><sub>2</sub> − <i>r</i><sub>3</sub><i>s</i><sub>3</sub>)</div>
			<div class="equation_label">(12a) </div>
			<p></p><div class="tab_35"><i>t</i><sub>1</sub> = (<i>r</i><sub>0</sub><i>s</i><sub>1</sub> +       <i>r</i><sub>1</sub><i>s</i><sub>0</sub> − <i>r</i><sub>2</sub><i>s</i><sub>3</sub> +       <i>r</i><sub>3</sub><i>s</i><sub>2</sub>)</div>
			<div class="equation_label">(12b) </div>
			<p></p><div class="tab_35"><i>t</i><sub>2</sub> = (<i>r</i><sub>0</sub><i>s</i><sub>2</sub> +       <i>r</i><sub>1</sub><i>s</i><sub>3</sub> +       <i>r</i><sub>2</sub><i>s</i><sub>0</sub> − <i>r</i><sub>3</sub><i>s</i><sub>1</sub>)</div>
			<div class="equation_label">(12c) </div>
			<p></p><div class="tab_35"><i>t</i><sub>3</sub> = (<i>r</i><sub>0</sub><i>s</i><sub>3</sub> − <i>r</i><sub>1</sub><i>s</i><sub>2</sub> +       <i>r</i><sub>2</sub><i>s</i><sub>1</sub> +       <i>r</i><sub>3</sub><i>s</i><sub>0</sub>)</div>
			<div class="equation_label">(12d) </div>
			
			<p>Quaternion multiplication is associative, but (except for some special cases) is not commutative.  Therefore if <b><i>a</i></b>, <b><i>b</i></b> and <b><i>c</i></b> are quaternions, then:
			
			</p><p></p><div class="centered">(<b><i>ab</i></b>)<b><i>c</i></b> = <b><i>a</i></b>(<b><i>bc</i></b>)</div>
			<p></p><div class="centered"><b><i>ab</i></b> ≠ <b><i>ba</i></b></div>
			
			<!-- ====================================================== -->
			<h3> Quaternion Inversion </h3>
			<!-- ====================================================== -->
			The <b><i>inverse</i></b> of a quaternion is obtained by negating the imaginary components:
			
			<p></p><div class="tab_35">
				<b><i>q</i></b><sup>-1</sup> = ( <i>q</i><sub>0</sub>, −<i>q</i><sub>1</sub>, −<i>q</i><sub>2</sub>, −<i>q</i><sub>3</sub> )
			</div>
			<div class="equation_label">(13)</div>
			
			<!-- ====================================================== -->
			<h3> Quaternion Rotation </h3>
			<!-- ====================================================== -->
			
			We can rotate a point (<i>x, y, z</i>) by the quaternion <b><i>q</i></b> using the following three steps:
			
			<p><b><u>Step 1:</u></b>  Convert the point to be rotated into a quaternion by assigning the point's coordinates as the quaternion's imaginary components, and setting the quaternion's real component to zero.  If (<i>x, y, z</i>) is the point to be rotated, then it is converted to a quaternion as follows:
			
			</p><p></p><div class="tab_30">
				<b><i>p</i></b> = (<i>p</i><sub>0</sub>, <i>p</i><sub>1</sub>, <i>p</i><sub>2</sub>, <i>p</i><sub>3</sub>) = ( 0, <i>x</i>, <i>y</i>, <i>z</i> )
			</div>
			<div class="equation_label">(14)</div>
			
			<p><b><u>Step 2:</u></b> Perform the rotation.  Quaternion rotation requires two multiplications.

			</p><p></p><div class="tab_30">
				For active rotation:&nbsp;&nbsp;&nbsp;&nbsp;<i><b>p'</b></i> = <i><b>q</b><sup>−1</sup> <b>pq</b></i>	
			</div>
			<div class="equation_label">(15a)</div>
			
			<p></p><div class="tab_30">
				For passive rotation:&nbsp;&nbsp;&nbsp;&nbsp;<i><b>p'</b></i> = <i><b>qpq</b><sup>−1</sup></i>
			</div>
			<div class="equation_label">(15b)</div>
			
			<p>where:
			
			</p><p></p><div class="tab_05"><b><i>p</i></b> contains the point to be rotated (see step 1)</div>
			<br><div class="tab_05"><b><i>q</i></b> is a rotation quaternion</div>
			<br><div class="tab_05"><i><b>q</b><sup>−1</sup></i> is the inverse of <b><i>q</i></b></div>
			<br><div class="tab_05"><i><b>p'</b></i> contains the coordinates of the rotated point</div>
				
			<p>Active rotation is when the point is rotated with respect to the coordinate system, and passive rotation is when the coordinate system is rotated with respect to the point.  The two rotations are opposite from each other.			
			</p><p>Note that since quaternion multiplication is associative, it doesn't matter if we perform the multiplications in the order <i>(<b>qp</b>)<b>q</b><sup>−1</sup></i> or <i><b>q</b>(<b>pq</b><sup>−1</sup>)</i>.
			
			</p><p><b><u>Step 3:</u></b> Extract the rotated coordinates from <i><b>p'</b></i>:
			
			</p><p></p><div class="tab_35">
				<i><b>p'</b></i> = (0, <i>x'</i>, <i>y'</i>, <i>z'</i> )
			</div>
			<div class="equation_label">(16)</div>
			
			<p>The rotated quaternion <i><b>p'</b></i> will have four elements as does any quaternion.  However, the real element will always equal zero.  The 3D coordinates of the rotated point (<i>x'</i>, <i>y'</i>, <i>z'</i>) are therefore just the imaginary components of <i><b>p'</b></i>.
			
			<!-- ====================================================== -->
			</p><h2> Properties of Quaternions </h2>
			<!-- ====================================================== -->
			The following are some useful properties of quaternions.  Up until now, this paper has discussed only rotation quaternions.  However, rotation quaternions are only a subset of all possible quaternions, just as rotation matrices are a subset of all possible 3x3 matrices.  The following properties apply to all quaternions unless otherwise specified. 			
			
			<ol>
				<li style="margin: 10px 0;">The length (magnitude) of a quaternion is <img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/prop-01.png" alt="equation">
				</li><li style="margin: 10px 0;">A quaternion is a "unit" quaternion if |<i>q</i>| = 1.
				</li><li style="margin: 10px 0;">All rotation quaternions must be unit quaternions.
				</li><li style="margin: 10px 0;">The quaternion <i><b>q</b></i> = (1, 0, 0, 0) is the <i><b>identity quaternion</b></i>.  It represents no rotation.  If <i><b>q</b></i> is an arbitrary quaternion and <i><b>i</b></i> is the identity quaternion, then <i><b>qi</b></i> = <i><b>iq</b></i> = <i><b>q</b></i>.
				</li><li style="margin: 10px 0;">The <i><b>conjugate</b></i> of a quaternion is q<sup>*</sup> = ( <i>q</i><sub>0</sub>, −<i>q</i><sub>1</sub>, −<i>q</i><sub>2</sub>, −<i>q</i><sub>3</sub> )
				</li><li style="margin: 10px 0;">The inverse of a quaternion is <img style="vertical-align:middle" src="./Quaternions_and_how_to_use_them_files/prop-06.png" alt="equation">.  The product of a quaternion and its inverse is the identity quaternion: <i><b>qq</b><sup>−1</sup></i> = <i><b>q</b><sup>−1</sup></i><i><b>q</b></i> = (1, 0, 0, 0).  Note that for this special case, quaternion multiplication is commutative.
				</li><li style="margin: 10px 0;">For rotation quaternions, the inverse equals the conjugate.  So for rotation quaternions, <span class="noBreak"><i><b>q</b><sup>−1</sup></i>&nbsp;=&nbsp;<i><b>q</b><sup>*</sup></i>&nbsp;=&nbsp;( <i>q<sub>0</sub>, −q<sub>1</sub>, −q<sub>2</sub>, −q<sub>3</sub></i> ).</span>
				</li><li style="margin: 10px 0;">Inverting or conjugating a rotation quaternion has the effect of reversing the axis of rotation, which modifies it to rotate in the opposite direction from the original.  That is, if a point is rotated to a new position using <i><b>q</b></i>, then rotating it again using <i><b>q</b><sup>−1</sup></i> or <i><b>q</b><sup>*</sup></i> will return it to its original location.
				</li><li style="margin: 10px 0;">Any given rotation has two possible quaternion representations.  If one is known, the other can be found by taking the negative of all four terms.  This has the effect of reversing both the rotation angle and the axis of rotation.  So if <i><b>q</b></i> is a rotation quaternion, then <i><b>q</b></i> and −<i><b>q</b></i> will produce the same rotation.
				</li><li style="margin: 10px 0;">A rotation of <i><b>q</b><sub>a</sub></i> followed by a rotation of <i><b>q</b><sub>b</sub></i> can be combined into the single rotation <i><b>q</b><sub>c</sub></i>&nbsp;=&nbsp;<i><b>q</b><sub>b</sub></i><i><b>q</b><sub>a</sub></i>.  This can be extended to an arbitrary number of rotations.  Note that the order matters (because quaternion multiplication is not commutative).
				</li><li style="margin: 10px 0;">Quaternion multiplication is associative: (<b><i>ab</i></b>)<b><i>c</i></b> = <b><i>a</i></b>(<b><i>bc</i></b>)
				</li><li style="margin: 10px 0;">Quaternion multiplication is not commutative: <b><i>ab</i></b> ≠ <b><i>ba</i></b>
			</li></ol>
			
			<!-- ====================================================== -->
			<h2> Related Pages </h2>
			<!-- ====================================================== -->
			
			<ul style="list-style: none;">
				<li style="margin: 10px 0;"><a href="https://danceswithcode.net/engineeringnotes/rotations_in_3d/rotations_in_3d_part1.html"><b>Rotations in Three-Dimensions: Euler Angles and Rotation Matrices. </b></a>Describes a commonly used set of Tait-Bryan Euler angles, and shows how to convert from Euler angles to a rotation matrix and back.
				</li><li style="margin: 10px 0;"><a href="https://danceswithcode.net/engineeringnotes/quaternions/conversion_tool.html"><b>Rotation Conversion Tool. </b></a>An on-line utility that converts between Euler Angles, Quaternions, Axis-Angle, and Rotation Matrix representations.
			</li></ul>




			<!-- ====================================================== -->
			<!-- END STUFF												-->
			<!-- ====================================================== -->
			<p>&nbsp;</p><p>	
			</p><hr>
			<p class="centered">
			<b><i>Comments and error reports may be sent to the following address.  We may post comments of general interest.  Be sure to identify the page you are commenting on.</i></b>
			</p><p class="centered"><img src="./Quaternions_and_how_to_use_them_files/email1.png" alt="Email address as an image to prevent spamming">.  
			</p><hr>
			
			<!-- ============================= -->
			<!-- END HOME MENU BUTTON  		   -->
			<!-- ============================= -->
			<div class="centered">
				<nav class="menu">
					<ul>
						<li><a href="https://danceswithcode.net/engineeringnotes/index.html">Home </a></li>
					</ul>
				</nav>
			</div>
			<!-- ============================= -->
			<!-- END OF MENU BUTTON    		   -->
			<!-- ============================= -->

		</div>
	


</body></html>